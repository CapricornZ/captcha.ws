#set( $ContextPath = ${request.contextPath} )

<link rel="stylesheet" href="${ContextPath}/css/bootstrap.css" >

<script type="text/javascript" src="${ContextPath}/js/jquery/jquery-1.11.2.min.js"></script>
<script type="text/javascript" src="${ContextPath}/js/bootstrap.js"></script>
<script src="http://nakupanda.github.io/bootstrap3-dialog/assets/bootstrap/js/bootstrap.min.js"></script>

<link href="${ContextPath}/css/bootstrap-dialog.min.css" rel="stylesheet" type="text/css" />
<script src="${ContextPath}/js/bootstrap-dialog.min.js"></script>

<script type="text/javascript">
	$(function(){
		$("button[toggle='SHOW_DETAIL']").click(function(){
			var host = $(this).attr('host');
			BootstrapDialog.show({
				title : '操作',
				//message: $('<div></div>').load('${ContextPath}/command/client/' + host + '/detail.do')
	            message: $('<div></div>').load('${ContextPath}/command/client/' + host + '/operation.do')
	        });
		});
		
		$("table tr").click(function(){
			if( $(this).attr("host") != undefined ){
				var url = '${ContextPath}/command/client/' + $(this).attr("host") + '/detail.do';
				$('#detail').load(url);
			}
		});
	});
</script>
    
<div class="container-fluid">
	<div class="row-fluid">
		<div class="span8"><!--Sidebar content-->
			<table class="table table-striped .table-bordered">
				<tr>
					<td>HOSTNAME/IP</td>
					<td>身份证</td>
					<td>姓名</td>
					<td>OPS</td>
					<td>updateTime</td>
				</tr>
				#foreach($client in ${CLIENTS})
					<tr host="${client.ip}">
						<td>${client.ip}</td>
						<td>$!{client.config.pid}</td>
						<td>$!{client.config.pname}</td>
						<td>
							#if(${client.operation.size()}==1)
								<button class="btn btn-primary" toggle="SHOW_DETAIL" host="${client.ip}">SHOW OPS</button>
							#end
						</td>
						<td>${client.updateTime}</td>
					</tr>
				#end
			</table>
		</div>
		<div id="detail" class="span4"><!--Sidebar content-->
		</div>
	</div>
</div>


<div class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">Modal title</h4>
      </div>
      <div class="modal-body">
        <p>One fine body…</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->